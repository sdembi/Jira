name: Test Workflow

on:
  repository_dispatch:
    types: [jira-status-deployment-needed]
  workflow_dispatch:
    inputs:
      jira_ticket_key:
        description: 'Jira ticket key'
        required: false
        default: 'TEST-123'
      jira_status:
        description: 'Jira status'
        required: false
        default: 'In Progress'
      salesforce_components:
        description: 'Salesforce components'
        required: false
        default: 'none'
      component_types:
        description: 'Component types'
        required: false
        default: 'none'
      sandbox_org:
        description: 'Sandbox org'
        required: false
        default: 'dev'

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Print trigger info
      run: |
        echo "Workflow triggered!"
        echo "Event: ${{ github.event_name }}"
        echo "Repository: ${{ github.repository }}"
        echo "Ref: ${{ github.ref }}"
        
    - name: Print repository_dispatch payload
      if: github.event_name == 'repository_dispatch'
      run: |
        echo "Repository dispatch event type: ${{ github.event.action }}"
        echo "Client payload: ${{ toJson(github.event.client_payload) }}"
        
    - name: Print workflow_dispatch inputs
      if: github.event_name == 'workflow_dispatch'
      run: |
        echo "Jira Ticket: ${{ github.event.inputs.jira_ticket_key }}"
        echo "Jira Status: ${{ github.event.inputs.jira_status }}"
        echo "SF Components: ${{ github.event.inputs.salesforce_components }}"
        echo "Component Types: ${{ github.event.inputs.component_types }}"
        echo "Sandbox Org: ${{ github.event.inputs.sandbox_org }}"
        
    - name: Success message
      run: echo "âœ… Workflow completed successfully!"

